# 各种问题

## 1. 瀑布流分页问题

数据重复、数据缺失问题

-   前端本身写的不好也会出现这个问题

### 1.1. 问题

普通分页上这个问题不会太明显。

但是瀑布流的情况下，非常容易观察到。

### 1.2. 解决思路

1. 缓存：将数据缓存一份，读这个快照
    1. 但是缓存肯定得过期的
2. 看有没有天然有序的 id 字段，相当于传了 offset，比如说 到期时间 之类的东西
3. 客户端去重

## 2. MySQL 深分页问题

### 2.1. 解决方案一：根据最大id

```sql
-- max_id 可以由前端传递过来
select * from table_name where id > max_id limit 100000, 10
```

### 2.2. 子查询

```sql
select * from table_name where id in 
(select id from table_name where user = xxx limit 100000, 10)
```