# 读书笔记

> 领域驱动设计：软件核心复杂性应对之道

## 第一部分 运用领域模型

什么是模型？

模型是一种简化，是对现实的解释，把与问题密切相关的方面抽象出来，忽略无关的细节。

为了创建一个真正能为用户的活动所用的软件，需要的关于这种活动所需要的知识是极为庞大的，模型真实解决这种信息超载的工具。

领域模型，正是对领域知识严格组织、且有选择的抽象。目标并不是建立一个符合“现实”的模型，而是出于某种目的，概括地反映现实。

**_模型在领域驱动设计中的作用_**

有3个基本的用途，也决定了模型的选择：

1. **模型和设计的核心互相影响。**这里想强调的是，模型和实现要紧密结合，这样后面才有用，能开发出真正的产品，维护也有用，开发也有用，可以基于模型的理解来解释代码
2. **模型是团队所有成员使用的通用语言的中枢。**模型和实现之间有关联，开发人员可以用模型来讨论程序，也可以无障碍的与领域专家沟通。同时由于语言是基于模型的，可以借助自然语言对模型本身进行精化
3. **模型是浓缩的知识。**模型记录了我们如何看待领域。是我们将信息组织在了模型中。

**_软件的核心_**

软件的核心是为用户解决领域相关问题的能力。

通常技术人员只对能提高其技能的可量化问题感兴趣，不愿意去学习领域知识和进行领域建模。但是软件核心的复杂性需要我们直接去面对和解决。这会偏离工作的重点。

## 第 1 章 消化知识

举了个PCB的例子：选定一个简单的场景，从一个很简单的模型开始，和 PCB 工程师一起完善模型。建立出的模型看上去是一个对象交互图的样子。

在这个过程中，统一了各种同义词和语言中的微小差别，排除了很多无关的领域细节，从而更好地沟通。

当PCB工程师提出新的功能需求时，就一起走查对象交互的场景。当模型对象无法清楚地表达某个重要场景时，就通过头脑风暴一起创建新的模型对象或者修改原有的模型对象，消化其中的知识，精化模型。

### 1.1 有效建模的要素

以下几个因素使得上述案例得以成功：

1. **模型和实现绑定。**原型虽然简陋，但是原型最初就在模型和实现之间建立了链接，并且在后续迭代中我们一直维护保持了这个链接。
2. **建立了一种基于模型的语言。**最初，PCB工程师需要解释一些基本的PCB问题，开发也需要解释类图的一些含义。但是随着项目的进展，双方都可以直接使用模型中的术语，并以符合模型结构的语句来表达自己的想法，彼此无需翻译即可理解互相的意思。
3. **开发一个蕴含丰富知识的模型。**模型不仅仅是一种数据模式，还包含了对象的行为和强制性规则，这些都是解决复杂问题不可或缺的部分。
4. **提炼模型。**重要的概念不断被添加，但是同样重要的是，不重要的概念被逐渐剔除。当一个不需要的概念和需要的概念有关联时，则把重要的概念提取到一个新模型中，其他那些不要的概念就可以丢弃了。
5. **头脑风暴和实验。**语言、草图、头脑风暴，这些让讨论中可以尝试模型的变化。当走查场景时，口头表达本身就可以作为模型的可行性测试，因为人们听到后立刻就能分辨出它是否表达得清楚、简洁，还是很笨拙。

### 1.2 知识消化

在大量的信息里探寻出有用的部分。

通常由开发人员领导，和领域专家组成团队共同协作。一起收集信息，并通过消化组织称有用的形式。开发人员在这个过程里学习重要的业务原理，领域专家提炼自己的重要知识。

传统瀑布方法中，业务专家和分析员讨论，分析员理解消化后，抽象后将结果传递给程序员。这种方法没有来自于程序员的反馈。知识只是朝着一个方向流动，而且没有累积。

### 1.3 持续学习

项目知识零散地分散在很多人和很多文档里，甚至丢失了。高效率的团队需要有意识地积累知识，并持续学习。

### 1.4 知识丰富的设计

为了建立模型要获取的知识远远不只是“发现名词”。业务活动、规则、涉及的实体，都是领域的核心。

消化知识，模型迭代，程序重构，这样新的知识才不断地合并到应用程序中。

建模不只是实体和值对象，业务规则中可能存在不一致，业务专家和软件专家的紧密合作才可以让规则澄清，消除矛盾、删除无用规则。

开发向业务专家展示技术工件，甚至是代码，但是应该是领域专家（在程序员的指导下）可以理解的。

### 1.5 深层模型

有用的模型很少停留在表面，随着我们理解的加深，我们往往会丢弃最初那些看上去很重要的表面元素，或者切换角度来看他们，从而获得一些一开始不可能发现的，巧妙的抽象，切中问题的要害。

## 第 2 章 交流与语言的使用
