>  笔记来源：《On Java 8》 + 黑马2020JavaSE课程

> Java是基于C++设计的编程语言，最核心的变化就是引入了“虚拟机”和“垃圾回收机制”。自SmallTalk语言开始使用“对象”这一概念，经过多年实践发现，将一切都抽象成对象显然是不合适的，不过“对象”这个概念也很有用。

> 如果是Windows，不要用自带的记事本来编辑文本文件。UTF-8编码的文件开头会自动添加一个0xefbbbf的字符。

# 1 面相对象编程OOP

OOP是一种编程思维方式和编码架构。

## 抽象

程序员要用计算机来解决现实问题，就要在实际要解决的问题和计算机模型之间简历一种关联。

所有的程序语言都是一种抽象，如汇编语言是一种对于底层机器的抽象，而命令式语言（如C语言）是对汇编语言的抽象，这些抽象让我们更注重计算机结构的内容，而非问题本身。

Object-Oriented Programming, OOP 则是提供了一些工具来抽象问题本身，同时这种抽象也可以作为计算机模型。这可以让我们更注重实际问题。将问题里的一些元素和它们在计算机模型中的表示称为“对象”。对象有自己的状态、行为和标识。

## 接口

拥有相同特征和行为的一些对象可以归属为一类 class/type。定义好类型后，可以根据情况生成很多的对象。

对象之间需要有交互来解决一些问题，那么对象能接受的特定请求、行为，是通过接口interface定义的。在类里规定了接口形式。

## 服务提供

对象作为服务提供者，在软件设计的时候，应该秉承“高内聚”的原则，每一个类的功能应该单一且高效，便于复用和理解。

## 封装

提供访问控制。让调用者不要触碰到不该触碰的细节，让开发者可以轻松优化。

## 复用

组合composition 和 聚合aggregation。在代码上组合和聚合是一样的，区别在于业务上，组合的部件和整体拥有同样的生命周期，而聚合不然。

比起继承，应该优先考虑组合。

## 继承

可以通过继承一个类来复用一个类。通常有2种使用方式：

1. 添加新的方法，是 is like a 的关系
2. 覆盖父类的方法，是 is a 的关系，可以纯粹替代。

## 多态

调用者直接调用父类，不需要关注子类。

如何知道究竟应该调用哪个方法呢？这里有一个**后期绑定**的概念，在java对象中有一个特殊的代码位，可以在运行时动态地计算对象中要调用的方法的地址。

## 单继承

Java是单继承的，所有的类都继承了Object，这样对**异常处理**和**垃圾回收**非常友好。

## 集合

java5以前，集合元素都是Object，元素进入集合时进行了向上转型，取出的时候要程序员自己做向下转型。

Java5引入了泛型Generic，实现了参数化类型机制。确定了集合的具体类型，避免想上传下和向下转型的开销。

## 对象创建与生命周期

对象应该放在内存的哪里？

如果放在栈里，开辟空间和释放空间会比较容易，只需要栈指针下移和上移的汇编命令，但是这样就需要一开始设计好对象的生存情况。

如果放在堆里，动态创建，运行时创建空间可能很慢。不过有一个合理的假设，对象通常很复杂，相比于对象创建的整体开销而言，寻找和释放内存的开销不是很重要。

对象放在堆里的话，编译器是不知道它的生命周期的，C++需要手动维护，Java则是使用垃圾回收器。

## 异常处理

以前代码的异常处理通常都是根据约定俗成的规则，比如说返回0，但是容易忘掉，一旦程序员忘掉就忘掉了。

而在java中，会抛出一个Exception对象，无法忽视它，而且在编码时正确处理，也可以很方便的恢复程序的运行。

## 小结

面向过程程序包含数据定义和函数调用。要找到程序的意图，你必须要在脑中建立一个模型，弄清函数调用和更底层的概念。这些程序令人困扰，因为它们的表示更多地面向计算机而不是我们要解决的问题，这就是我们在设计程序时需要中间表示的原因。

OOP 在面向过程编程的基础上增加了许多新的概念，所以有人会认为使用 Java 来编程会比同等的面向过程编程要更复杂。在这里，我想给大家一个惊喜：通常按照 Java 规范编写的程序会比面向过程程序更容易被理解。

你看到的是对象的概念，这些概念是站在 “问题空间” 的（而不是站在计算机角度的 “解决方案空间”），以及发送消息给对象以指示该空间中的活动。面向对象编程的一个优点是：设计良好的 Java 程序代码更容易被人阅读理解。由于 Java 类库的复用性，通常程序要写的代码也会少得多。

OOP 和 Java 不一定适合每个人。评估自己的需求以及与现有方案作比较是很重要的。请充分考虑后再决定是不是选择 Java。如果在可预见的未来，Java 并不能很好的满足你的特定需求，那么你应该去寻找其他替代方案（特别是，我推荐看 Python）。

如果你依然选择 Java 作为你的开发语言，我希望你至少应该清楚你选择的是什么，以及为什么选择这个方向。